---
layout: post
title: "对求 n 的约数个数的思考"
subtitle:   ""
date:   2016-03-15
author: "RryLee"
tags:
    - 算法
---

* content
{:toc}

> 该问题由[ProjectEuler(欧拉计划)](https://projecteuler.net/problem=12)第十二题产生

# 原题

The sequence of triangle numbers is generated by adding the natural numbers. So the 7th triangle number would be 1 + 2 + 3 + 4 + 5 + 6 + 7 = 28. The first ten terms would be:

1, 3, 6, 10, 15, 21, 28, 36, 45, 55, ...

Let us list the factors of the first seven triangle numbers:

 1: 1
 3: 1,3
 6: 1,2,3,6
10: 1,2,5,10
15: 1,3,5,15
21: 1,3,7,21
28: 1,2,4,7,14,28
We can see that 28 is the first triangle number to have over five divisors.

What is the value of the first triangle number to have over five hundred divisors?

> 就是求这样数列上第一个由超过 500 个约数的第一个数。

# 算法

也就是说这题的问题在于怎么高效的去求出一个数的约数个数。

这是我最开始写的一段算法(还不能算算法）

    function getFactorCount($i) {
        if ($i == 1) return 1;
    
        $count = 2; // 1 和 $i
        for ($j=2; $j < floor(sqrt($i)); $j++) {
            if ($i % $j == 0) $count += 2;
        }
    
        if ($i == $j * $j) $count ++; // 9 = 3 * 3
    
        return $count;
    }

基本是安装基本思维一步一步写下来。

**我们可以来提高一步**，也就是[因式分解？](http://baike.baidu.com/link?url=gZ_kFmpWoR8V-X7nQTi4fIVAv9L0gbv8C2ZMu4Ex727ESp3agbX-le47JBKDphk2pUTo2_OMkmcMdvtsTwd2g_)

    function getFactorCount($num) {
      $limit = $num;
      for ($i = 1; $i < $limit; $i ++) {
        if ($num % $i == 0) {
         	$limit = $num / $i;
          if ($limit != $i) { 当 3*3 时，就不要+1
            $count ++;
          }
          $count ++;
        }
      }
    }

接下来，你需要看下 [Prime Factorization](http://www.mathsisfun.com/prime-factorization.html)

然后，我们来求出 28 的约数个数

28 = 2 * 2 * 7 = 2 \** 2 * 7

D(28) = (2+1)*(1+1) = 6

这里需要有 [约数定理](http://baike.baidu.com/link?url=x5iJzmhdLhz_vCQI6E4Qez2qTgSw1kKYUlQjy7JtribrtCbdEvCXGfJz30idZKTyBN936ZMLZJCCklZp6it4Pa) 的基础

这样我们的代码大体也就出来了。首先你需要有一个质数的数组,去求出我们的所有因子。

# 最后

给出第 n 个triangle numbers，我们由
t = (n + 1) * n / 2;

    D(t) = D(n / 2) * D(n + 1) (n % 2 == 0)
    D(t) = D(n) * D((n + 1) / 2) (n % 2 == 1)

# 代码 (c ++ 版本)

<script src="http://ideone.com/e.js/QCDIE3" type="text/javascript" ></script>
